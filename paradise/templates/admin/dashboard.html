{% extends "admin/base_site.html" %}

{% block extrastyle %}
  {{ block.super }}
  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <style>
    /* ===== Background ===== */
    body {
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      background-attachment: fixed;
      color: white;
    }

    /* ===== Transparent Glassy Card ===== */
    .glass-card {
      background: rgba(0, 0, 50, 0.35);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.18);
      border-radius: 16px;
      box-shadow: 0 4px 30px rgba(0, 102, 255, 0.4); /* üíô blue glow */
    }

    .glass-card {
      animation: fadeInUp 0.6s ease;
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(15px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .glass-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 32px rgba(0, 123, 255, 0.6);
    }



    /* ===== Table Styling ===== */
    .table thead th {
      background: rgba(13, 110, 253, 0.25) !important;
      color: #fff !important;
    }
    .table-hover tbody tr:hover {
      background: rgba(255, 255, 255, 0.1) !important;
    }

    /* ===== Stat Cards ===== */
    .stat-card {
      padding: 25px;
      border-radius: 20px;
      font-weight: bold;
      font-size: 1.2rem;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    }

    /* ===== Transparent Badges ===== */
    .badge {
      padding: 8px 12px;
      border-radius: 10px;
      background: rgba(13, 110, 253, 0.3) !important;
      color: #fff !important;
      font-size: 0.9rem;
      border: 1px solid rgba(255,255,255,0.2);
    }

    .glass-card {
      background: rgba(0, 0, 0, 0.35) !important; /* darker transparent */
    }
    .btn-glass {
      background: rgba(0, 123, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: white;
      font-weight: 500;
      border-radius: 12px;
      padding: 10px 20px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 20px rgba(0, 123, 255, 0.4);
    }
    .btn-glass:hover {
      background: rgba(0, 123, 255, 0.4);
      transform: scale(1.05);
    }

    .table.glass-table {
      background: rgba(255, 255, 255, 0.05);
      color: white;
    }
    .table.glass-table thead {
      background: rgba(0, 123, 255, 0.2);
    }
    .table.glass-table tbody tr {
      background: rgba(255, 255, 255, 0.03);
    }



  </style>
{% endblock %}



{% block content %}
  <div class="container py-5" style="max-width: 1200px; margin: auto;">

    <div class="glass-card p-2 mb-3 text-white fw-bold">üè® Paradise Hotel Dashboard</div>

    <!-- Stat Cards -->
    <div class="row g-4 mb-5 text-center">
      <div class="col-md-3">
        <div class="glass-card stat-card">
          <i class="fa-solid fa-hotel fa-2x mb-2"></i>
          <h6>Total Rooms</h6>
          <p class="fs-2 fw-bold">{{ total_rooms }}</p>
        </div>
      </div>
      <div class="col-md-3">
        <div class="glass-card stat-card">
          <i class="fa-solid fa-file-lines fa-2x mb-2"></i>
          <h6>Total Bookings</h6>
          <p class="fs-2 fw-bold">{{ total_bookings }}</p>
        </div>
      </div>
      <div class="col-md-3">
        <div class="glass-card stat-card">
          <i class="fa-solid fa-circle-check fa-2x mb-2"></i>
          <h6>Today Check-ins</h6>
          <p class="fs-2 fw-bold">{{ today_checkins }}</p>
        </div>
      </div>
      <div class="col-md-3">
        <div class="glass-card stat-card">
          <i class="fa-solid fa-circle-xmark fa-2x mb-2"></i>
          <h6>Today Check-outs</h6>
          <p class="fs-2 fw-bold">{{ today_checkouts }}</p>
        </div>
      </div>
    </div>

    <!-- Weekly Bookings Chart -->
    <div class="glass-card p-2 mb-3 text-white fw-bold"> üìà Weekly Bookings </div>

    <div class="glass-card p-3 mb-5">
      <img src="data:image/png;base64,{{ chart }}" class="img-fluid rounded" style="background: transparent;" />
    </div>

    <!-- Bookings per Room Type -->
    <div class="glass-card p-2 mb-3 text-white fw-bold"> üè® Bookings per Room Type </div>
    <div class="glass-card p-3 mb-5">
      <img src="data:image/png;base64,{{ room_chart }}" class="img-fluid rounded" style="background: transparent;" />
    </div>

    <!-- Top Rooms -->
    <<div class="glass-card p-2 mb-3 text-white fw-bold">üèÜ Top Rooms (Most Booked)</div>
    <ul class="list-group mb-5 shadow-sm">
      {% for room in top_rooms %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          Room {{ room.room_number }} - {{ room.room_type }}
          {% if room.status == "available" %}
            <span class="badge bg-success">Available</span>
          {% elif room.status == "booked" %}
            <span class="badge bg-danger">Booked</span>
          {% elif room.status == "maintenance" %}
            <span class="badge bg-warning text-dark">Maintenance</span>
          {% endif %}
          <span class="badge">{{ room.total_bookings }}</span>
        </li>
      {% empty %}
        <li class="list-group-item">No bookings yet.</li>
      {% endfor %}
    </ul>

    <!-- Recent Bookings -->
    <div class="glass-card p-2 mb-3 text-white fw-bold">üïí Recent Bookings</div>
    <div class="table-responsive glass-card p-3">

      <table class="table glass-table table-hover">

        <thead>
          <tr>
            <th>Customer</th>
            <th>Room</th>
            <th>Check-in</th>
            <th>Check-out</th>
            <th>Created At</th>
          </tr>
        </thead>
        <tbody>
          {% for booking in recent_bookings %}
            <tr>
              <td>{{ booking.customer_name }}</td>
              <td>
                Room {{ booking.room.room_number }} ({{ booking.room.room_type }})
              </td>
              <td>{{ booking.check_in }}</td>
              <td>{{ booking.check_out }}</td>
              <td>{{ booking.created_at|date:"M d, Y H:i" }}</td>
            </tr>
          {% empty %}
            <tr><td colspan="5" class="text-center">No recent bookings found.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
